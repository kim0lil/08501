def fileName = 'step010.properties'

task initialize {
    Properties props = new Properties()
    props.load(new FileInputStream("$fileName"))
    props.each { prop -> project.ext.set(prop.key, prop.value) }
}

task('echoProcess')
tasks.create('echoSubProcess')

task echo {

    dependsOn initialize
    dependsOn echoProcess, echoSubProcess
}

task propertiesTask {
    doLast {
        println "$sMessage"
    }
}

echo.dependsOn echoProcess, echoSubProcess, propertiesTask

echo.doFirst {
    
    println "Hello Gradle $sName $sVersion $sMessage"
}

echoProcess.doLast {
    println "echo Process ( $sName $sVersion ) "
}

echoSubProcess.doLast {
    println "[echo SubProcess ( $sName $sVersion )]"
}